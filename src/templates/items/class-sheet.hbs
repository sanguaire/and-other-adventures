<div class="class-abilities">
    <div class="ability">
        <label for="hitDie">{{localize "aoa.hit-die"}}</label>
        <select class="text-centered" name="system.hitDie">
            {{#select item.system.hitDie}}
                <option value="d6">{{localize 'aoa.d6'}}</option>
                <option value="d8">{{localize 'aoa.d8'}}</option>
                <option value="d10">{{localize 'aoa.d10'}}</option>
            {{/select}}
        </select>
        <!--        <input type="text" data-dtype="Text" name="hitDie" value="{{system.hitDie}}">-->
    </div>
    <div class="ability">
        <label for="system.initiativeBonus">{{localize "aoa.initiative-bonus"}}</label>
        <input type="text" data-dtype="Number" name="system.initiativeBonus" value="{{numberFormat item.system.initiativeBonus sign=true decimal=0}}" sign="true">
    </div>
    <div class="ability">
        <label for="system.allowedArmor">{{localize "aoa.allowed-armor"}}</label>
        <input type="text" data-dtype="text" name="system.allowedArmor" value="{{item.system.allowedArmor}}">
    </div>
</div>
<div class="ability-list">
    <div class="flexrow" style="margin-bottom: 0.4em; height: auto; align-items: start;">
        <div class="flexcol">
            <div class="flexrow">
                <label for="system.hasCantrips">{{localize "aoa.has-cantrips"}}?</label>
                <input name="system.hasCantrips" type="checkbox" {{checked item.system.hasCantrips}}>
            </div>
            <div class="flexrow">
                <label for="system.hasSpells">{{localize "aoa.has-spells"}}?</label>
                <input name="system.hasSpells" type="checkbox" {{checked item.system.hasSpells}}>
            </div>
            <div class="flexrow">
                <label for="system.hasRituals">{{localize "aoa.has-rituals"}}?</label>
                <input name="system.hasRituals" type="checkbox" {{checked item.system.hasRituals}}>
            </div>
        </div>
        <div class="flexcol">
            <div class="flexrow">
                <label for="system.hasSpecialization">{{localize "aoa.has-specialization"}}?</label>
                <input name="system.hasSpecialization" type="checkbox" {{checked item.system.hasSpecialization}}>
            </div>
            <div class="flexrow" >
                <label for="system.hasKnacks">{{localize "aoa.has-knacks"}}?</label>
                <input name="system.hasKnacks" type="checkbox" {{checked item.system.hasKnacks}}>
            </div>
        </div>
    </div>

    {{#each item.system.classAbilities as |item index|}}
        <div data-item-id="{{item.id}}">
            <input type="text" data-property="name" class="change-ability" value="{{item.name}}">
            <textarea data-property="description" class="change-ability" rows="5" style="resize: none;">{{item.description}}
            </textarea>
        </div>
    {{/each}}
    <input type="text" name="abilityName" class="new-ability">
</div>
<div class="level-progression">
    <h1>{{localize "aoa.level-progression"}}</h1>
    <table>
        <thead>

        <th>{{localize "aoa.level"}}</th>
        <th>{{localize "aoa.xp"}}</th>
        <th>{{localize "aoa.base-attack-bonus"}}</th>
        <th>{{localize "aoa.saves.poison"}}</th>
        <th>{{localize "aoa.saves.breathWeapon"}}</th>
        <th>{{localize "aoa.saves.polymorph"}}</th>
        <th>{{localize "aoa.saves.spell"}}</th>
        <th>{{localize "aoa.saves.magicItem"}}</th>

        </thead>
        <tbody>
        {{#each item.system.levelProgression as |progression key|}}
            <tr>
                <td>{{key}}:</td>
                <td><input type="text" data-dtype="Number" name="system.levelProgression.{{key}}.xp" value="{{progression.xp}}"></td>
                <td><input no-wheel="true" type="text" data-dtype="Number" name="system.levelProgression.{{key}}.attackBonus" value="{{numberFormat progression.attackBonus sign=true decimals=0}}"></td>
                {{# with progression as |progression|}}
                    {{# with key as |progressionkey|}}
                        {{#each progression.saves as |save key|}}
                            <td><input no-wheel="true" type="text" data-dtype="Number" name="system.levelProgression.{{progressionkey}}.saves.{{key}}" value="{{save}}"></td>
                        {{/each}}
                    {{/with}}
                {{/with}}
            </tr>
        {{/each}}
        </tbody>
    </table>
</div>
